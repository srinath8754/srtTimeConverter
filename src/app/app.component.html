

<!-- Preview Modal (single, clean) -->
<div *ngIf="previewContent !== null" class="preview-modal">
  <div class="preview-modal-content">
    <div class="preview-modal-header">
      <span class="preview-modal-title">Preview: {{ previewFileName }}</span>
      <button class="preview-modal-close" (click)="closePreview()" title="Close">&times;</button>
    </div>
    <pre class="preview-modal-body">
      <ng-container *ngIf="previewContent !== null">
        <ng-container *ngFor="let line of previewContent.split('\n'); let i = index">
          <span [ngStyle]="previewErrorLines.has(i+1) ? {'background-color':'#ffd6d6','color':'#d32f2f','font-weight':'bold'} : {}">{{ line }}</span>
        </ng-container>
      </ng-container>
    </pre>
  </div>
</div>
<header class="main-header">
  <span class="main-header-title">SRT Timestamp Converter</span>
</header>

<div style="text-align:center; margin-top: 20px;">
  <h2 style="display:none;">SRT Timestamp Converter</h2>  
  <div 
    class="drop-zone" 
    (drop)="onDrop($event)" 
    (dragover)="onDragOver($event)" 
    (dragleave)="onDragLeave($event)"
    [class.dragover]="isDragOver"
    style="border: 2px dashed #007bff; border-radius: 4px; padding: 20px; cursor: pointer;"
  >
    <span>Drag & drop .txt files here or</span>
    <input type="file" (change)="onFileSelected($event)" multiple accept=".txt" style="display:inline-block; margin-left:8px;" />
  </div>
</div>

<div *ngIf="convertedFiles.length > 0" style="margin-top: 20px;">
  <h2>Converted Files</h2>
  <div style="text-align:right; margin-bottom: 10px;">
    <select [(ngModel)]="downloadType" style="padding: 4px 8px;">
      <option value="txt">.txt</option>
      <option value="srt">.srt</option>      
    </select>
    <span style="margin-left: 8px; font-size: 14px; color: #555;">Download as</span>
    <button (click)="downloadAll()" style="margin-left: 16px;">Download All</button>
  </div>
<ul>
  <li *ngFor="let file of convertedFiles">
    <span class="file-name">{{file.name}}</span>
    <span class="file-actions">
      <button 
        (click)="openPreview(file)"
        [ngStyle]="file.hasCriticalError ? {'background-color':'#d32f2f', 'color':'#fff'} : {}"
        [attr.aria-label]="file.hasCriticalError ? 'Preview (SRT errors detected)' : 'Preview'"
        [attr.title]="file.hasCriticalError ? 'SRT time errors detected in this file' : 'Preview file'"
      >Preview</button>
      <button (click)="downloadFile(file)">Download</button>
      <button (click)="deleteFile(file)">Delete</button>
    </span>
  </li>
</ul>
</div>

<footer class="footer-signature" style="text-align:right; margin-top: 20px;">
  Developed by <span>Srinath</span><br>
</footer>
<footer class="footer-signature footer-left">
  <span class="footer-owned">Owned by RJ Boopathi</span>
</footer>
